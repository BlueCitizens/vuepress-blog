import{u as O,g as Z,h as ee,i as _,j as Ee,k as te,t as se,l as ae,m as P,n as b,p as le,q as M,s as t,v as U,x as $,R as I,y as re,z as Be,A as ue,B as oe,C as Ae,D as ie,E as ne,F as ce,O as pe,G as ve,H as he,P as me,I as ye,J as de,K as L}from"./app-Li5lUQgn.js";const ge=["/","/friends.html","/intro.html","/posts/HTTP%E7%9A%84%E6%A0%87%E5%A4%B4%EF%BC%88headers%EF%BC%89.html","/posts/Java%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E4%B9%8BHashMap.html","/posts/SRS%E7%AE%80%E5%8D%95%E9%83%A8%E7%BD%B2.html","/posts/SRS%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6.html","/posts/Spring%20Security%E9%85%8D%E7%BD%AE%E4%B9%8BloginPage%E5%92%8CloginrPocessingUrl.html","/posts/Spring%E5%AE%B9%E5%99%A8%E4%B9%8BIoC%E6%8E%A7%E5%88%B6%E5%8F%8D%E8%BD%AC.html","/posts/Ubuntu%E4%B8%8B%E4%BD%BF%E7%94%A8screen%E7%AE%A1%E7%90%86%E7%BB%88%E7%AB%AF.html","/posts/Ubuntu%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E5%92%8C%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98.html","/posts/activiti%E5%B7%A5%E4%BD%9C%E6%B5%81%E5%BC%95%E6%93%8E%E5%AD%A6%E4%B9%A0.html","/posts/authorizeRequests%EF%BC%88permitAll%E5%92%8Canonymous%EF%BC%89%E7%94%A8%E6%B3%95.html","/posts/nginx%E8%AF%B7%E6%B1%82%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90%E6%96%87%E4%BB%B6%E6%8A%A5404%20%E5%8F%AA%E8%83%BD%E8%BF%94%E5%9B%9E%E6%A0%B9%E8%B7%AF%E5%BE%84%E9%85%8D%E7%BD%AE%E7%9A%84%E6%96%87%E4%BB%B6.html","/posts/nginx%E9%83%A8%E7%BD%B2vue%E9%A1%B9%E7%9B%AE%E8%B8%A9%E5%9D%91.html","/posts/python%E5%88%97%E8%A1%A8%E3%80%81%E5%85%83%E7%BB%84%E7%AD%89%E7%AD%89%E5%A5%87%E6%80%AA%E7%9A%84%E6%93%8D%E4%BD%9C.html","/posts/scoped%E5%AF%B9import%E7%9A%84css%E6%97%A0%E6%95%88.html","/posts/spring%20boot%E5%B8%B8%E7%94%A8%E6%B3%A8%E8%A7%A3.html","/posts/%E4%BD%BF%E7%94%A8Nuitka%E6%89%93%E5%8C%85%E4%BD%A0%E7%9A%84Python%E5%BA%94%E7%94%A8.html","/posts/%E4%BD%BF%E7%94%A8ffmpeg%E6%8E%A8%E6%B5%81.html","/posts/%E4%BD%BF%E7%94%A8%E8%87%AA%E5%B7%B1%E7%9A%84%E4%BA%91%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%83%A8%E7%BD%B2VuePress.html","/posts/%E5%9C%A8Ubuntu20.04%E4%B8%8B%E5%AE%89%E8%A3%85MySQL5.7%E5%B9%B6%E5%BB%BA%E7%AB%8B%E8%BF%9C%E7%A8%8B%E8%BF%9E%E6%8E%A5.html","/posts/%E5%9C%A8WSL2%E4%B8%8A%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8SRS%E6%9C%8D%E5%8A%A1.html","/posts/%E5%9F%BA%E4%BA%8EjQuery%E7%9A%84%E8%A1%A8%E6%A0%BC%E6%8F%92%E4%BB%B6Bootgrid.html","/posts/%E5%AE%89%E8%A3%85Nuitka%E6%97%B6%E9%81%87%E5%88%B0pip%20subprocess%20to%20install%20build%20dependencies.html","/posts/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1%E7%9A%84%E7%AE%80%E5%8D%95%E5%AE%9E%E7%8E%B0.html","/posts/%E5%AE%9E%E7%94%A8%E5%B7%A5%E5%85%B7%E9%9B%86.html","/posts/%E5%B0%86%E4%BD%A0%E7%94%A8%E6%89%8B%E6%9C%BA%E7%BC%93%E5%AD%98%E7%9A%84B%E7%AB%99%E8%A7%86%E9%A2%91%E8%BD%AC%E6%8D%A2%E4%B8%BAmp4%E5%92%8Cass%E5%BC%B9%E5%B9%95.html","/posts/%E5%B0%8F%E7%B1%B3java%E6%96%B9%E5%90%91%E9%9D%A2%E7%BB%8F.html","/posts/%E5%B1%8F%E8%94%BD%E9%BB%98%E8%AE%A4%E9%87%8D%E5%AE%9A%E5%90%91%E7%99%BB%E5%BD%95%EF%BC%88%E5%AE%9E%E7%8E%B0AuthenticationEntryPoint%E6%8E%A5%E5%8F%A3%EF%BC%89.html","/posts/%E5%B8%B8%E8%A7%81%E7%9A%84%E5%8C%85%E7%AE%A1%E7%90%86.html","/posts/%E6%95%B4%E7%90%86%E4%B8%80%E4%B8%8B%E6%95%B0%E5%BC%80%E7%9A%84JD.html","/posts/%E7%BA%AFjs%E5%AE%9E%E7%8E%B0%E8%A7%86%E8%A7%89%E5%B7%AE%E6%95%88%E6%9E%9C.html","/posts/%E8%A7%A3%E5%86%B3nginx%E9%83%A8%E7%BD%B2vue%E9%A1%B9%E7%9B%AE%E5%90%8E%E5%88%B7%E6%96%B0%E9%A1%B5%E9%9D%A2%E8%BF%94%E5%9B%9E404%E6%88%96500.html","/posts/%E9%85%8D%E7%BD%AE%E4%B8%83%E7%89%9B%E4%BA%91%E5%AD%98%E5%82%A8CDN%E5%8A%A0%E9%80%9F.html","/posts/%E5%BD%92%E6%A1%A3/%E6%95%B0%E5%AD%A6%E4%BA%8C%E5%A4%A7%E7%BA%B2.html","/posts/%E5%BD%92%E6%A1%A3/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86%E7%AC%94%E8%AE%B0.html","/posts/%E5%BD%92%E6%A1%A3/%E8%BD%AF%E4%BB%B6%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84%E7%9F%A5%E8%AF%86%E7%82%B9%E6%95%B4%E7%90%86.html","/posts/%E9%9A%8F%E7%AC%94/Forever%2021%20%E2%80%94%E2%80%94%20%E7%94%9F%E6%97%A5%E5%BF%AB%E4%B9%90%EF%BC%8C%E6%88%91.html","/posts/%E9%9A%8F%E7%AC%94/%E4%B8%80%E4%BA%9B%E5%85%B3%E4%BA%8E%E6%96%B0%E6%97%A7%E6%97%B6%E4%BB%A3%E7%9A%84%E6%80%9D%E8%80%83.html","/posts/%E9%9A%8F%E7%AC%94/%E5%8D%9A%E5%AE%A2%E7%9A%84%E6%84%8F%E4%B9%89%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F.html","/404.html","/posts/","/posts/%E5%BD%92%E6%A1%A3/","/posts/%E9%9A%8F%E7%AC%94/","/category/","/category/%E7%BD%91%E7%BB%9C/","/category/%E5%BC%80%E5%8F%91/","/category/%E5%90%8E%E7%AB%AF/","/category/%E8%BF%90%E7%BB%B4/","/category/%E5%89%8D%E7%AB%AF/","/category/%E9%A1%B9%E7%9B%AE/","/category/%E8%81%8C%E4%B8%9A/","/category/%E7%AC%94%E8%AE%B0/","/category/cs/","/category/%E9%9A%8F%E7%AC%94/","/tag/","/tag/http/","/tag/%E6%B5%81%E5%AA%92%E4%BD%93/","/tag/srs/","/tag/java/","/tag/spring/","/tag/linux/","/tag/nginx/","/tag/vue/","/tag/python/","/tag/nuitka/","/tag/ffmpeg/","/tag/jenkins/","/tag/github/","/tag/javascript/","/article/","/star/","/timeline/"],De="SEARCH_PRO_QUERY_HISTORY",p=O(De,[]),Ce=()=>{const{queryHistoryCount:s}=L,a=s>0;return{enabled:a,queryHistory:p,addQueryHistory:l=>{a&&(p.value.length<s?p.value=Array.from(new Set([l,...p.value])):p.value=Array.from(new Set([l,...p.value.slice(0,s-1)])))},removeQueryHistory:l=>{p.value=[...p.value.slice(0,l),...p.value.slice(l+1)]}}},q=s=>ge[s.id]+("anchor"in s?`#${s.anchor}`:""),Fe="SEARCH_PRO_RESULT_HISTORY",{resultHistoryCount:w}=L,v=O(Fe,[]),fe=()=>{const s=w>0;return{enabled:s,resultHistory:v,addResultHistory:a=>{if(s){const l={link:q(a),display:a.display};"header"in a&&(l.header=a.header),v.value.length<w?v.value=[l,...v.value]:v.value=[l,...v.value.slice(0,w-1)]}},removeResultHistory:a=>{v.value=[...v.value.slice(0,a),...v.value.slice(a+1)]}}},He=s=>{const a=Ae(),l=_(),R=ie(),B=P(!1),m=ne([]);return ce(()=>{const{search:D,terminate:h}=pe(),C=()=>{m.value=[],B.value=!1},y=de(n=>{B.value=!0,n?D(n,l.value,a.value).then(c=>{var F,d;return((d=(F=a.value).searchFilter)==null?void 0:d.call(F,c,n,l.value,R.value))??c}).then(c=>{m.value=c,B.value=!1}).catch(c=>{console.error(c),C()}):C()},L.searchDelay);M([s,l],()=>y(s.value),{immediate:!0}),ve(()=>{h()})}),{searching:B,results:m}};var Se=Z({name:"SearchResult",props:{query:{type:String,required:!0},isFocusing:Boolean},emits:["close","updateQuery"],setup(s,{emit:a}){const l=ee(),R=_(),B=Ee(te),{enabled:m,addQueryHistory:D,queryHistory:h,removeQueryHistory:C}=Ce(),{enabled:y,resultHistory:n,addResultHistory:c,removeResultHistory:F}=fe(),d=m||y,S=se(s,"query"),{results:g,searching:J}=He(S),r=ae({isQuery:!0,index:0}),A=P(0),i=P(0),j=b(()=>d&&(h.value.length>0||n.value.length>0)),k=b(()=>g.value.length>0),x=b(()=>g.value[A.value]||null),N=()=>{const{isQuery:e,index:E}=r;E===0?(r.isQuery=!e,r.index=e?n.value.length-1:h.value.length-1):r.index=E-1},z=()=>{const{isQuery:e,index:E}=r;E===(e?h.value.length-1:n.value.length-1)?(r.isQuery=!e,r.index=0):r.index=E+1},V=()=>{A.value=A.value>0?A.value-1:g.value.length-1,i.value=x.value.contents.length-1},Y=()=>{A.value=A.value<g.value.length-1?A.value+1:0,i.value=0},G=()=>{i.value<x.value.contents.length-1?i.value+=1:Y()},K=()=>{i.value>0?i.value-=1:V()},Q=e=>e.map(E=>he(E)?E:t(E[0],E[1])),W=e=>{if(e.type==="customField"){const E=me[e.index]||"$content",[u,H=""]=ye(E)?E[R.value].split("$content"):E.split("$content");return e.display.map(o=>t("div",Q([u,...o,H])))}return e.display.map(E=>t("div",Q(E)))},f=()=>{A.value=0,i.value=0,a("updateQuery",""),a("close")};return le("keydown",e=>{if(s.isFocusing){if(k.value){if(e.key==="ArrowUp")K();else if(e.key==="ArrowDown")G();else if(e.key==="Enter"){const E=x.value.contents[i.value];D(s.query),c(E),l.push(q(E)),f()}}else if(y){if(e.key==="ArrowUp")N();else if(e.key==="ArrowDown")z();else if(e.key==="Enter"){const{index:E}=r;r.isQuery?(a("updateQuery",h.value[E]),e.preventDefault()):(l.push(n.value[E].link),f())}}}}),M([A,i],()=>{var e;(e=document.querySelector(".search-pro-result-list-item.active .search-pro-result-item.active"))==null||e.scrollIntoView(!1)},{flush:"post"}),()=>t("div",{class:["search-pro-result-wrapper",{empty:S.value?!k.value:!j.value}],id:"search-pro-results"},S.value===""?d?j.value?[m?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},B.value.queryHistory),h.value.map((e,E)=>t("div",{class:["search-pro-result-item",{active:r.isQuery&&r.index===E}],onClick:()=>{a("updateQuery",e)}},[t(U,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},e),t("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:u=>{u.preventDefault(),u.stopPropagation(),C(E)}})]))])):null,y?t("ul",{class:"search-pro-result-list"},t("li",{class:"search-pro-result-list-item"},[t("div",{class:"search-pro-result-title"},B.value.resultHistory),n.value.map((e,E)=>t(I,{to:e.link,class:["search-pro-result-item",{active:!r.isQuery&&r.index===E}],onClick:()=>{f()}},()=>[t(U,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[e.header?t("div",{class:"content-header"},e.header):null,t("div",e.display.map(u=>Q(u)).flat())]),t("button",{class:"search-pro-remove-icon",innerHTML:$,onClick:u=>{u.preventDefault(),u.stopPropagation(),F(E)}})]))])):null]:B.value.emptyHistory:B.value.emptyResult:J.value?t(re,{hint:B.value.searching}):k.value?t("ul",{class:"search-pro-result-list"},g.value.map(({title:e,contents:E},u)=>{const H=A.value===u;return t("li",{class:["search-pro-result-list-item",{active:H}]},[t("div",{class:"search-pro-result-title"},e||B.value.defaultTitle),E.map((o,X)=>{const T=H&&i.value===X;return t(I,{to:q(o),class:["search-pro-result-item",{active:T,"aria-selected":T}],onClick:()=>{D(s.query),c(o),f()}},()=>[o.type==="text"?null:t(o.type==="title"?Be:o.type==="heading"?ue:oe,{class:"search-pro-result-type"}),t("div",{class:"search-pro-result-content"},[o.type==="text"&&o.header?t("div",{class:"content-header"},o.header):null,t("div",W(o))])])})])})):B.value.emptyResult)}});export{Se as default};
